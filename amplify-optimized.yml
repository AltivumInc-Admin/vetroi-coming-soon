version: 1
frontend:
  phases:
    build:
      commands:
        - echo "Nothing to build - static HTML"
  artifacts:
    baseDirectory: /
    files:
      - '**/*'
  cache:
    paths: []

# Custom HTTP Headers for optimal caching and security
customHeaders:
  - pattern: '**/*.html'
    headers:
      - key: Cache-Control
        value: 'public, max-age=0, must-revalidate'
      - key: X-Frame-Options
        value: 'SAMEORIGIN'
      - key: X-Content-Type-Options
        value: 'nosniff'
      - key: Referrer-Policy
        value: 'strict-origin-when-cross-origin'
      - key: Permissions-Policy
        value: 'geolocation=(), microphone=(), camera=()'

  - pattern: '**/*.{js,css}'
    headers:
      - key: Cache-Control
        value: 'public, max-age=31536000, immutable'

  - pattern: '**/*.{png,jpg,jpeg,gif,svg,ico,webp}'
    headers:
      - key: Cache-Control
        value: 'public, max-age=31536000, immutable'
      - key: Content-Type
        value: 'image/*'

  - pattern: '**/*.pdf'
    headers:
      - key: Cache-Control
        value: 'public, max-age=604800'
      - key: Content-Type
        value: 'application/pdf'
      - key: Content-Disposition
        value: 'inline; filename="VetROI-Pilot-Welcome-Letter.pdf"'

  - pattern: '**/*.{mp4,mov,webm}'
    headers:
      - key: Cache-Control
        value: 'public, max-age=31536000'
      - key: Accept-Ranges
        value: 'bytes'

# Redirect rules for clean URLs and security
redirects:
  - source: '</^[^.]+$|\.(?!(html|json|txt|pdf)$)([^.]+$)/>'
    target: '/index.html'
    status: '200'
